#  Retail Insights: Data-Driven Cost Savings & Revenue Growth

> DSTI Applied MSc Project | Instacart Online Grocery Dataset

## Project Overview

This project analyzes 3M+ grocery orders to provide actionable recommendations for shop owners:
- **Association Rule Mining** (Apriori, FP-Growth, Eclat, UP-Tree)
- **Customer Segmentation** (RFM + KMeans)
- **Revenue Simulation** from data-driven product bundles
- **Promotion ROI** â€” targeted vs. blanket discounts

## Quick Start
ğŸ› ï¸ Step 0: Database Infrastructure
Before running the code, you must initialize the database:

Open your Supabase SQL Editor.
Copy and run the contents of database_setup.sql.
This creates the optimized B-Tree indexes and the product_details view.

### 1. Install dependencies
```bash
pip install -r requirements.txt
python pipeline.py
```

### 2. Download dataset
Go to https://www.kaggle.com/c/instacart-market-basket-analysis/data  
Download all CSV files into `data/raw/`

Required files:
- `orders.csv`
- `order_products__prior.csv`
- `order_products__train.csv`
- `products.csv`
- `aisles.csv`
- `departments.csv`

### 3. Run the ML pipeline
```bash
python pipeline.py
```
Or open `notebooks/pipeline.ipynb` in Jupyter.

### 4. Launch the dashboard
```bash
streamlit run app.py
```

## Project Structure

```
retail-insights/
â”œâ”€â”€app/
|   â””â”€â”€ app.py                 â† Streamlit dashboard
â”œâ”€â”€data/
â”‚   â”œâ”€â”€ raw/                  â† Kaggle CSVs (not tracked by git)
â”‚   â””â”€â”€ processed/            â† Auto-generated
â”œâ”€â”€ notebooks/
â”‚   â””â”€â”€ pipeline.ipynb
â”œâ”€â”€ results/                  â† Auto-generated by pipeline
â”‚   â”œâ”€â”€ association_rules.csv
â”‚   â”œâ”€â”€ customer_segments.csv
â”‚   â”œâ”€â”€ revenue_simulation.csv
â”‚   â”œâ”€â”€ promotion_efficiency.csv
â”‚   â””â”€â”€ algorithm_comparison.csv
â”œâ”€â”€ plots/                    â† Auto-generated figures
â”œâ”€â”€ requirements.txt
â””â”€â”€ README.md
```

## Methods

| Module | Algorithms |
|--------|-----------|
| Association Rules | Apriori, FP-Growth, Eclat |
| Utility Mining | UP-Tree (value-aware rules) |
| Segmentation | RFM Analysis + KMeans (k=4) |
| Revenue Model | Lift-based simulation |
| Promotion Analysis | Targeted vs. Blanket discount P&L |

## Team Roles

| Role | Task |
|------|------|
| Data Engineer | Data pipeline, merging, price enrichment |
| Data Scientist A | Association rule mining |
| Data Scientist B | Segmentation + utility mining |
| Business Analyst | Dashboard + report + demo video |

## Dashboard Pages

1. **Overview** â€” KPIs, top products, algorithm comparison
2. **Customer Segments** â€” RFM clusters, scatter maps, basket variability
3. **Product Associations** â€” Interactive rule explorer with filters
4. **Revenue Simulation** â€” Bundle ROI calculator with sliders
5. **Promotion ROI** â€” Targeted vs. blanket discount analysis

## Results & Recommendations

1. **Customer Purchase Behavior**
   - Average Order Time: Customers segments showed that some customers typically waited 7 days(weekly) or nearly 30 days(monthly) before their next order.
   - Basket Size: The typical basket has between 5 - 7 items per order and they order weekly while others have 16-25 items per oder and order monhly.
   - Average spend: The RFM Model splits the customers further into 2 segments; The Champions and The Regular Buyers. The champions are high frequency, high spend while the regular buyers are high frequency, low spend.
2. **Products & Categories**
   - The top items added to basket were:
         -Bananas
         -Bag of Organic Bananas
         -Limes
         -Large Lemons
         -Organic Strawberries
         -Organic Whole Milk
         -Organic Hass Avocado
     These products belong to almost the same categories like fruits and vegetables.
3. **Key Insights**
   - For the regular buyers, you will want to use low- cost discovery offers (e.g 5% off first bundle) to progressively grow their basket size.
   - A 'Citrus Bundle' could be created with limes and large lemons seeing as they appear in 1 of every 20 baskets. We can use this opportunity to covert the 61% who buy limes without lemons.
   - A blanket discount applies the same 15% offer to all customers regardless of their likelihood to buy but a targetted promotion targets the segments that are most likely to increase their basket size.
   - A 'Frquently bought together' widget on the app at check-out could remind the customers of products that are typically paired together.
   - A structure repositionin would arrange products bundles around each other and products with lowsales should be considered to be replaced by star product.
  
## Business Impact

This project helps the company
 - Improve cross-sell strategies with bundles.
 - Save cost and gain a higher ROI with targeted promotions instead of the lower gain with blanket promotions.
 - Restructure th
 - Analyse their customers and categorize them to know how to give promotions and and increase basket size of the regular buyers and also the champion buyers.

## License
Educational project â€” DSTI 2025
